## SOLID: рефакторинг слоя работы с Elasticsearch

В рамках задачи была проведена проверка класса, отвечающего за работу с Elasticsearch,
на соответствие принципам SOLID. В ходе анализа было выявлено нарушение принципа
Single Responsibility Principle (SRP).

### Проблема

Изначально класс `FilmService` одновременно выполнял несколько обязанностей:
- формирование запросов к Elasticsearch;
- работу с Redis (кеширование);
- применение exponential backoff;
- преобразование данных в Pydantic-модели.

Это приводило к избыточной связности и усложняло сопровождение кода.

---

### Решение

Логика работы с Elasticsearch была вынесена в отдельный слой — репозиторий.

#### Введён новый класс:
- `ElasticFilmRepository` (`src/storage/films_elastic.py`)

Он отвечает **исключительно** за:
- формирование и выполнение запросов к Elasticsearch;
- применение exponential backoff при взаимодействии с ES;
- возврат «сырых» данных (dict), без бизнес-логики.

#### Обновлён `FilmService`:
- теперь сервис отвечает только за:
  - оркестрацию вызовов;
  - кеширование в Redis;
  - преобразование данных в доменные модели (`Film`, `FilmShort`);
- `FilmService` больше не зависит напрямую от `AsyncElasticsearch`, а работает через абстракцию репозитория.

---

### Преимущества подхода

- соблюдение **SRP (Single Responsibility Principle)**;
- снижение связности между слоями;
- упрощение тестирования и расширения логики;
- возможность в будущем заменить Elasticsearch или добавить альтернативные хранилища
  без изменения бизнес-логики сервиса.

---

### Итог

Структура кода приведена в соответствие с принципами SOLID.
Функциональность сервиса сохранена, все функциональные тесты проходят успешно.