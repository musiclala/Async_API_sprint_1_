## SOLID: рефакторинг слоя работы с Redis

В рамках задачи была проведена проверка логики работы с Redis
на соответствие принципам SOLID. В ходе анализа было выявлено
нарушение принципа Single Responsibility Principle (SRP).

### Проблема

Изначально класс `FilmService` напрямую:
- работал с Redis (`get`, `setex`, `flush`);
- содержал логику повторных попыток (exponential backoff);
- формировал ключи кеша;
- управлял временем жизни данных (TTL).

Таким образом, бизнес-сервис был перегружен инфраструктурной логикой,
что повышало связность и усложняло сопровождение.

---

### Решение

Логика работы с Redis была вынесена в отдельный слой — кеш-репозиторий.

#### Введён новый класс:
- `RedisCacheRepository` (`src/storage/redis_cache.py`)

Он отвечает **исключительно** за:
- взаимодействие с Redis;
- формирование и использование ключей кеша;
- применение exponential backoff при ошибках Redis;
- операции `get / setex / flush`.

#### Обновлён `FilmService`:
- сервис больше не знает деталей работы с Redis;
- использует репозиторий кеша как зависимость;
- отвечает только за бизнес-логику и оркестрацию вызовов.

---

### Преимущества подхода

- соблюдение **SRP (Single Responsibility Principle)**;
- снижение связности между бизнес-логикой и инфраструктурой;
- упрощение повторного использования кеша;
- возможность заменить Redis (например, Memcached) без изменения сервисов;
- повышение читаемости и тестируемости кода.

---

### Итог

Логика работы с Redis вынесена в отдельный слой и приведена
в соответствие с принципами SOLID. Архитектура сервиса стала
более модульной и расширяемой. Все функциональные тесты проходят успешно.